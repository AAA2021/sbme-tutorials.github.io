<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Week 3: Images in Frequency Domain</title>
  <meta name="description" content="These pages shall contain all the materials corresponding to courses, assigned to me, in the SBME department at Cairo University.">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/2018/cv/notes/3_week3.html">
  <link rel="alternate" type="application/rss+xml" title="Tutorials for SBME Students" href="/feed.xml">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    <!-- 
     -->
    

    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    
    
<!--   
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
            <a class="page-link" href="/2018/cv/assignments/1_assignment1.html">Assignment 1: Images, Histograms, Gradients</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/1_week1.html">Week 1: Warming up with Python Basics</a>
            
          
            
            
            <a class="page-link" href="/2018/dsp/notes/1_week1.html">Week 1: Signals in Python</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/1_week1a.html">Assignment 1 - part 1: Your first experience with Git and our Github classroom</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/1_week1a.html">Week 1 - Part 1: Basics of C++</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/1_week1b.html">Assignment 1 - part 2: Revision on C++</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/1_week1b.html">Week 1 - Part 2: Basics of Git and Github</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/1_week1re.html">Task 1: Resubmission</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/assignments/2_assignment2.html">Assignment 2</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/2_code_formatting.html">Code Styling (formatting): Enhancing Your Code Readability</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/2_week2.html">Week 2: Image Processing 1</a>
            
          
            
            
            <a class="page-link" href="/2018/dsp/notes/2_week2.html">Week 2: Signals and Basis Functions: Composition and Decomposition</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/2_week2a.html">Assignment 2: C++ Basic Operations on Memory</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/2_week2a.html">Week 2 - Part1: Memory, pointers, and references</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/assignments/3_assignment3.html">Assignment 3</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/3_faq1.html">FAQ #1: Why exposing namespaces is a bad practice</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/3_faq2.html">FAQ #2: Why `int *p = &amp;x` != `*p = &amp;x`</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/3_faq3.html">FAQ #3: Why not using `std::cin` inside functions of particular logic</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/3_week3.html">Week 3: Images in Frequency Domain</a>
            
          
            
            
            <a class="page-link" href="/2018/dsp/notes/3_week3.html">Week 3: Euler&#39;s Identity, Sinusoids, and Fourier</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/3_week3a.html">Assignment 3 - Part 1: Arrays</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/3_week3a.html">Week 3 - Part1: Static Arrays and Dynamic Arrays</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/3_week3b.html">Assignment 3 - Part 2: Struct and Functions Overloading</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/3_week3b.html">Week 3 - Part2: Command Line Arguments and Compilation of Multiple Files</a>
            
          
            
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/4_week4.html">Week 4: Image Filtering and Edge Detection</a>
            
          
            
            
            <a class="page-link" href="/2018/dsp/notes/4_week4.html">Week 3: Euler&#39;s Identity, Sinusoids, and Fourier</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/4_week4a.html">Group Assignment 4 - Part 1: Git for Teams and Markdown Resumes</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/4_week4a.html">Week 4 - Part1: Struct, Stacks, Linked Lists, and Queues</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/4_week4b.html">Assignment 4: Stacks and Queues</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/4_week4b.html">Week 4 - Part2: More on Structs, Linked Lists, Naming Conventions, Const-correctness, Build Systems, and Git for Teams</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/5_week5.html">Week 5: Hough Transform (Line and Circle Detection)</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/5_week5a.html">Week 5 - Part1: Recursion, Big-Oh Notation, Markdown</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/6_week6.html">Week 6: Corner Detection</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/6_week6a.html">Week 6 - Part1: Sorting, Bubble Sort, Selection Sort, Learning Resources</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/7_exercises.html">Exercises 1: C++ Basics and Linear Data Structures</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/7_week7.html">Week 7: Segmentation (Thresholding and Region growing)</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/7_week7a.html">Week 7 - Part1: Revision, Common Mistakes, and Best Practices, Type normalization using C++ templates</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/8_week8a.html">Week 8 - Part1: Binary Search Trees, Sets (ADT) and Maps (ADT)</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/8_week8b.html">Week 8 - Part2: Heaps, Priority Queues (ADT), and Shortest Path Problem</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/9_week9.html">Week 7 - Part1</a>
            
          
            
            
            <a class="page-link" href="/about/">About</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/resumes/asem.html">Resume</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
     -->
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Week 3: Images in Frequency Domain</h1>
  </header>

  <div class="post-content">
    <ul id="markdown-toc">
  <li><a href="#discrete-fourier-transform-dft" id="markdown-toc-discrete-fourier-transform-dft">Discrete Fourier Transform (DFT)</a>    <ul>
      <li><a href="#example" id="markdown-toc-example">Example</a></li>
      <li><a href="#solution" id="markdown-toc-solution">Solution</a></li>
    </ul>
  </li>
  <li><a href="#properties-of-dft" id="markdown-toc-properties-of-dft">Properties of DFT</a>    <ul>
      <li><a href="#complex" id="markdown-toc-complex">Complex</a></li>
      <li><a href="#high-and-low-frequency-components" id="markdown-toc-high-and-low-frequency-components">High and low frequency components</a></li>
      <li><a href="#no-one-to-one-corresponding" id="markdown-toc-no-one-to-one-corresponding">No one to one corresponding</a></li>
      <li><a href="#symmetric" id="markdown-toc-symmetric">Symmetric</a></li>
      <li><a href="#periodic" id="markdown-toc-periodic">Periodic</a></li>
    </ul>
  </li>
  <li><a href="#inverse-fourier-transform" id="markdown-toc-inverse-fourier-transform">Inverse Fourier Transform</a></li>
  <li><a href="#fourier-filtering" id="markdown-toc-fourier-filtering">Fourier Filtering</a>    <ul>
      <li><a href="#ideal-lpf-example" id="markdown-toc-ideal-lpf-example">Ideal LPF Example</a></li>
      <li><a href="#ideal-hpf-example" id="markdown-toc-ideal-hpf-example">Ideal HPF Example</a></li>
    </ul>
  </li>
  <li><a href="#color-image-processing-block-diagram" id="markdown-toc-color-image-processing-block-diagram">Color Image Processing Block Diagram</a></li>
  <li><a href="#demo" id="markdown-toc-demo">Demo</a></li>
</ul>

<h2 id="discrete-fourier-transform-dft">Discrete Fourier Transform (DFT)</h2>
<p>Fourier transform is a decomposition of a signal into some basis functions. Here basis functions are weighed sum of sin and cos functions 
Given a discrete image I(x,y) the fourier transform of it is  :</p>

<script type="math/tex; mode=display">I(u,v) = \sum_{x= 0}^{N_{clos} - 1 } \sum_{y = 0}^{N_{rows} - 1}  I(x,y) e^{-i2 \pi (\frac{xu}{N_{cols}}+\frac{yv}{N_{rows}})}</script>

<p><img src="../images/Basis_functions.png" alt="" /></p>

<p>Low frequency components are found at the central regions while high frequency components are in peripherals.</p>

<p>The Original Image
<img src="../images/Original_Image.png" alt="" /></p>

<p>Fourier Transform of the image Without shifting</p>

<p><img src="../images/FT_noShift.png" alt="" /></p>

<p>Fourier Transform of the image after shifting. Shifting is done to move zero frequency component to the center of the image.</p>

<p><img src="../images/Fourier_Spectrum_of_the_image.png" alt="" /></p>
<h3 id="example">Example</h3>

<p>For the image shown find Fourier transform at points I(0,0), I(0,1) and I(1,0)</p>

<p><img src="../images/FT_ex.png" alt="" /></p>

<h3 id="solution">Solution</h3>
<ul>
  <li>
    <p><strong>F(0,0)</strong></p>

    <ol>
      <li>
        <script type="math/tex; mode=display">I(0,0) = \sum_{x= 0}^{3} \sum_{y = 0}^{3}  I(x,y) e^{-i2 \pi (\frac{x*0}{4}+\frac{y*0}{4})}</script>
      </li>
      <li>
        <script type="math/tex; mode=display">I(0,0) = \sum_{x= 0}^{3} \sum_{y = 0}^{3}  I(x,y) e^{0}</script>
      </li>
      <li>
        <script type="math/tex; mode=display">I(0,0) = \sum_{x= 0}^{3} \sum_{y = 0}^{3}  I(x,y)  = 12</script>
      </li>
    </ol>
  </li>
  <li>
    <p><strong>F(0 , 1)</strong></p>

    <ol>
      <li>
        <script type="math/tex; mode=display">I(0,1) = \sum_{x= 0}^{3} \sum_{y = 0}^{3}  I(x,y) e^{-i2 \pi (\frac{y}{4})}</script>
      </li>
      <li>
        <script type="math/tex; mode=display">I(0,1) = 2 e^{-2 \pi j(0)} +  e^{-2 \pi j(0)} + 2 e^{-2 \pi j(\frac{1}{4})} +</script>
      </li>
    </ol>

    <script type="math/tex; mode=display">e^{-2 \pi j(\frac{1}{4})} + 2 e^{-2 \pi j(\frac{2}{4})} + e^{-2 \pi j(\frac{2}{4})} + 2 e^{-2 \pi j(\frac{3}{4})}  +  e^{-2 \pi j(\frac{3}{4})} = 0</script>
  </li>
  <li>
    <p><strong>F(1, 0)</strong></p>
    <ol>
      <li>
        <script type="math/tex; mode=display">I(1,0) = \sum_{x= 0}^{3} \sum_{y = 0}^{3}  I(x,y) e^{-i2 \pi (\frac{x}{4})}</script>
      </li>
      <li>
        <script type="math/tex; mode=display">I(1,0) = 6 e^{-2 \pi j(\frac{1}{4})}+ 4 e^{-2 \pi j(\frac{2}{4})}  + 2 e^{-2 \pi j(\frac{3}{4})}</script>
      </li>
      <li>
        <script type="math/tex; mode=display">I(1,0) = -4 - 4j</script>
      </li>
    </ol>
  </li>
</ul>

<h2 id="properties-of-dft">Properties of DFT</h2>

<ul>
  <li>
    <h3 id="complex">Complex</h3>
    <p>It is a complex representation of the image. So it includes a magnitude and a phase.  Magnitude component is the desired one in visualization. It represents the weight of each frequency component and gives an intuitive impression about frequency spectrum of the image. Due to large variations in magnitudes (Center of the image has a high value compared with other values) we display it in a log scale to compress dynamic range  see <a href="https://homepages.inf.ed.ac.uk/rbf/HIPR2/pixlog.htm">link</a></p>
  </li>
</ul>

<script type="math/tex; mode=display">log_{10} (1 + ||I(u, v )||)</script>

<ol>
  <li>Magnitude image without log transformation
  <img style="width:150%" src="../images/FT_Nolog.png" /></li>
  <li>Magnitude image with log transformation
  <img style="width:175%" src="../images/Fourier_Spectrum_of_the_image.png" /></li>
</ol>

<p>Phase is very important for image recovery but has no significance in visualization</p>
<ul>
  <li>
    <h3 id="high-and-low-frequency-components">High and low frequency components</h3>
    <p>In Fourier domain central regions represent the low frequency components and peripheral regions represent the high frequency components and the center of the image represents the DC value with zero frequency which is the total intensity of the image.</p>
  </li>
  <li>
    <h3 id="no-one-to-one-corresponding">No one to one corresponding</h3>
    <p>where each point in frequency domain is calculated from the whole spatial image</p>

    <p><script type="math/tex">I(u,v) = T(I)(x,y)</script> not <script type="math/tex">T(I(x,y))</script></p>
  </li>
  <li>
    <h3 id="symmetric">Symmetric</h3>
    <p>which means that we can recover the image if we have only the half of fourier domain. This is a very important property in fourier transform and used in MRI imaging see <a href="http://mriquestions.com/partial-fourier.html">partial fourier imaging</a>.</p>
  </li>
</ul>

<p><img style="scale:80%" src="../images/HFI.png" /></p>

<p><strong>Question</strong>: Where redundancy comes from ??</p>

<p><strong>Answer</strong> : Each point in fourier domain is a complex with two information magnitude and phase or real part and imaginary part. So half of fourier image actually hold up the whole information of the spatial domain image.</p>

<ul>
  <li>
    <h3 id="periodic">Periodic</h3>
    <p>As we deal with a digital images (Sampled) and sampling implies periodicity so 2D FT is periodic.</p>
  </li>
</ul>

<h2 id="inverse-fourier-transform">Inverse Fourier Transform</h2>

<script type="math/tex; mode=display">I(x,y) = \frac{1}{N_{rows} N_{cols}} \sum_{u= 0}^{N_{clos} - 1 } \sum_{v = 0}^{N_{rows} - 1}  I(u,v) e^{i2 \pi (\frac{xu}{N_{cols}}+\frac{yv}{N_{rows}})}</script>

<p>Inverse transformation from  spatial domain to spatial domain. Looks like fourier transform except for the sign of exponential and the weight of the function.</p>
<h2 id="fourier-filtering">Fourier Filtering</h2>

<p>Basic concept of fourier filtering is to mask desired frequencies and suppress undesired components. It is just multiplication process alternative to convolution in spatial domain which is computationally expensive. the block diagram of fourier filtering process 
<img style="scale:80%" src="../images/Fourier_Filtering.png" /></p>

<h3 id="ideal-lpf-example">Ideal LPF Example</h3>
<p>This is the filter that masks the low frequency components 
<img src="../images/Ideal_Low_Pass_Filter_in_frequency_domain.png" alt="" /></p>

<p>Spectrum of the image after applying the ideal LPF 
<img src="../images/Spectrum_After_applying_LPF.png" alt="" /></p>

<p>the effect of suppression high frequency components is blurring the image
<img src="../images/ValueChannelLPF.png" alt="" /></p>

<h3 id="ideal-hpf-example">Ideal HPF Example</h3>
<p>This is the filter that masks the high frequency components 
<img src="../images/Ideal_High_Pass_Filter_in_frequency_domain.png" alt="" /></p>

<p>Spectrum of the image after applying the HPF 
<img src="../images/Spectrum_After_applying_HPF.png" alt="" /></p>

<p>Suppression of low frequency components will produce an edge image</p>

<p><img src="../images/ValueChannelHPF.png" alt="" /></p>

<h2 id="color-image-processing-block-diagram">Color Image Processing Block Diagram</h2>

<p>Dealing with colored images is not applicable in RGB color space. So we need to move to another color space for example HSV color space and applying our filtering on the channel associated with intensity (Here value channel). Now region channels again and finally return back to RGB color space. The block diagram is illustrated in the following figure.</p>

<p><img src="../images/block_diagram.png" alt="" /></p>

<p>This is the result of applying this block diagram on the previous filtered images. We can see that color information returned back to the image.</p>

<p><img style="width:90%" src="../images/Filtered_Image.png" />
<img style="width:80%" src="../images/Filtered_Image-1.png" /></p>

<h2 id="demo">Demo</h2>
<p>You can download the demo from <a href="https://github.com/sbme-tutorials/cv_week3_demo.git">cv_week3_demo</a>.</p>

  </div>

</article>

<!-- 
Thanks to Roman Cheplyaka for his instructions to minifying the mathjax package:
https://ro-che.info/articles/2017-04-02-deploying-mathjax 
-->

<script src="/mathjax/MathJax.js"></script>

<script type="text/javascript">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    tex2jax: { inlineMath: [['$', '$'], ['\\(', '\\)']], skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'] },
    jax: ["input/TeX", "output/HTML-CSS"],
    "HTML-CSS": {
      availableFonts: ["TeX"],
      imageFont: null
    },
    MathMenu: {
      showRenderer: false,
      showFontMenu: false,
      showLocale: false
    }
  });
</script>
      </div>
    </main>

    <footer class="site-footer">
  <div class="wrapper">

    <!-- <h2 class="footer-heading">Tutorials for SBME Students</h2> -->

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              Asem Alaa
            
            </li>
            
            <li><a href="mailto:asem.a.abdelaziz@gmail.com">asem.a.abdelaziz@gmail.com</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/A-Alaa"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">A-Alaa</span></a>

          </li>
          

          
            <li>
              <a href="https://linkedin.com/in/asem-alaa">
                <i class="fa fa-linkedin"></i> LinkedIn
              </a>
            </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>These pages shall contain all the materials corresponding to  courses, assigned to me, in the SBME department at Cairo University.</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
