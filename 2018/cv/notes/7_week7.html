<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Week 7: Segmentation (Thresholding and Region growing)</title>
  <meta name="description" content="These pages shall contain all the materials corresponding to courses, assigned to me, in the SBME department at Cairo University.">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/2018/cv/notes/7_week7.html">
  <link rel="alternate" type="application/rss+xml" title="Tutorials for SBME Students" href="/feed.xml">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    <!-- 
     -->
    

    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    
    
<!--   
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/10_week10.html">Week 7 - Part1</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/assignments/1_assignment1.html">Assignment 1: Images, Histograms, Gradients</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/1_week1.html">Week 1: Warming up with Python Basics</a>
            
          
            
            
            <a class="page-link" href="/2018/dsp/notes/1_week1.html">Week 1: Signals in Python</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/1_week1a.html">Assignment 1 - part 1: Your first experience with Git and our Github classroom</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/1_week1a.html">Week 1 - Part 1: Basics of C++</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/1_week1b.html">Assignment 1 - part 2: Revision on C++</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/1_week1b.html">Week 1 - Part 2: Basics of Git and Github</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/1_week1re.html">Task 1: Resubmission</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/assignments/2_assignment2.html">Assignment 2</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/2_code_formatting.html">Code Styling (formatting): Enhancing Your Code Readability</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/2_week2.html">Week 2: Image Processing 1</a>
            
          
            
            
            <a class="page-link" href="/2018/dsp/notes/2_week2.html">Week 2: Signals and Basis Functions: Composition and Decomposition</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/2_week2a.html">Assignment 2: C++ Basic Operations on Memory</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/2_week2a.html">Week 2 - Part1: Memory, pointers, and references</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/assignments/3_assignment3.html">Assignment 3</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/3_faq1.html">FAQ #1: Why exposing namespaces is a bad practice</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/3_faq2.html">FAQ #2: Why `int *p = &amp;x` != `*p = &amp;x`</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/3_faq3.html">FAQ #3: Why not using `std::cin` inside functions of particular logic</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/3_week3.html">Week 3: Images in Frequency Domain</a>
            
          
            
            
            <a class="page-link" href="/2018/dsp/notes/3_week3.html">Week 3: Euler&#39;s Identity, Sinusoids, and Fourier</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/3_week3a.html">Assignment 3 - Part 1: Arrays</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/3_week3a.html">Week 3 - Part1: Static Arrays and Dynamic Arrays</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/3_week3b.html">Assignment 3 - Part 2: Struct and Functions Overloading</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/3_week3b.html">Week 3 - Part2: Command Line Arguments and Compilation of Multiple Files</a>
            
          
            
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/4_week4.html">Week 4: Image Filtering and Edge Detection</a>
            
          
            
            
            <a class="page-link" href="/2018/dsp/notes/4_week4.html">Week 3: Euler&#39;s Identity, Sinusoids, and Fourier</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/4_week4a.html">Group Assignment 4 - Part 1: Git for Teams and Markdown Resumes</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/4_week4a.html">Week 4 - Part1: Struct, Stacks, Linked Lists, and Queues</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/4_week4b.html">Assignment 4: Stacks and Queues</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/4_week4b.html">Week 4 - Part2: More on Structs, Linked Lists, Naming Conventions, Const-correctness, Build Systems, and Git for Teams</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/5_week5.html">Week 5: Hough Transform (Line and Circle Detection)</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/5_week5a.html">Week 5 - Part1: Recursion, Big-Oh Notation, Markdown</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/6_week6.html">Week 6: Corner Detection</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/6_week6a.html">Week 6 - Part1: Sorting, Bubble Sort, Selection Sort, Learning Resources</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/7_exercises.html">Exercises 1: C++ Basics and Linear Data Structures</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/7_week7.html">Week 7: Segmentation (Thresholding and Region growing)</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/7_week7a.html">Week 7 - Part1: Revision, Common Mistakes, and Best Practices, Type normalization using C++ templates</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/8_week8.html">Week 8: Segmentation (Clustering Segmentation)</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/8_week8a.html">Week 8 - Part1: Binary Search Trees, Sets (ADT) and Maps (ADT)</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/9_week9.html">Week 9: Heaps, Priority Queues (ADT), and Shortest Path Problem</a>
            
          
            
            
            <a class="page-link" href="/about/">About</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/resumes/asem.html">Resume</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
     -->
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Week 7: Segmentation (Thresholding and Region growing)</h1>
  </header>

  <div class="post-content">
    <ul id="markdown-toc">
  <li><a href="#image-segmentation" id="markdown-toc-image-segmentation">Image Segmentation</a>    <ul>
      <li><a href="#3d-segmentation" id="markdown-toc-3d-segmentation">3D Segmentation</a></li>
    </ul>
  </li>
  <li><a href="#histogram-based-segmentation-image-binarization" id="markdown-toc-histogram-based-segmentation-image-binarization">Histogram Based Segmentation (Image Binarization)</a></li>
  <li><a href="#optimal-threshold" id="markdown-toc-optimal-threshold">Optimal Threshold</a></li>
  <li><a href="#otsu-thresholding" id="markdown-toc-otsu-thresholding">Otsu Thresholding</a>    <ul>
      <li><a href="#basic-idea" id="markdown-toc-basic-idea">Basic Idea</a></li>
      <li><a href="#within-class-variance" id="markdown-toc-within-class-variance">Within class variance</a></li>
      <li><a href="#between-class-variance" id="markdown-toc-between-class-variance">Between class variance</a></li>
      <li><a href="#mean-and-variance-calculation" id="markdown-toc-mean-and-variance-calculation">Mean and variance calculation</a>        <ul>
          <li><a href="#how-to-get-pdf-of-both-classes-" id="markdown-toc-how-to-get-pdf-of-both-classes-">How to get pdf of both classes ?</a></li>
        </ul>
      </li>
      <li><a href="#basic-algorithm" id="markdown-toc-basic-algorithm">Basic Algorithm</a></li>
    </ul>
  </li>
  <li><a href="#seed-pixels-region-growing" id="markdown-toc-seed-pixels-region-growing">Seed Pixels (Region Growing)</a></li>
</ul>

<h2 id="image-segmentation">Image Segmentation</h2>

<p>Image segmentation is the process of partitioning the image into isolated areas or segment. Each segment has similar features, for example have same intensity or same color etc, and is considered as an object in the image. There are many applications of image segmentation of medical images including automatic diagnostic applications and other application related to treatment. Treatment planning is an example of 3D image segmentation.</p>

<h3 id="3d-segmentation">3D Segmentation</h3>
<p>3D object is reconstructed from series of medical images. Here an example of reconstruction of 3D human skull from a series of dicom images scanned by CT scanner.</p>

<p><span style="display:block;text-align:center"><img style="width:45%" src="../images/Selection_061.png" /></span></p>

<p>From that skull we can segment different interested regions or object. Here we are interested in segmentation of mandible, maxilla, upper and lower teeth. Each object now is separated and we can treat with it independently. Using these object dentists can plane process of dental implant or orthodontic treatment or any similar operation.</p>

<p><span style="display:block;text-align:center"><img style="width:60%" src="../images/results.png" /></span></p>

<p>This was a project I worked on for a subject in my pre-master year under title “An optimized technique for 3D segmentation for orthodontic treatment plane”. I used <a href="https://www.vtk.org/">VTK</a> for reconstruction and segmentation processes and <a href="https://www.qt.io/">Qt</a> for GUI design. Segmentation was based on thresholding and connectivity testing which is similar to region growing approach but in 3D.</p>

<h2 id="histogram-based-segmentation-image-binarization">Histogram Based Segmentation (Image Binarization)</h2>

<p>Histogram based segmentation or image binarization segment the image into two classes, object and background based on a certain threshold. Image will be a binary image according to following equation</p>

<script type="math/tex; mode=display">% <![CDATA[
I(x,y) = 
\begin{cases}
0, I(x,y) < T \\\ 
1, I(x,y) > T 
\end{cases} %]]></script>

<p>The question here is How to select threshold ?</p>

<h2 id="optimal-threshold">Optimal Threshold</h2>

<p>Assume we have the following histogram. For ideal case object and background would be totally isolated, optimal threshold is well defined here.</p>

<p><img style="width:85%" src="../images/Selection_065.png" /></p>

<p>Here an example of real image with isolated object, background histograms.</p>

<p><img style="width:85%" src="../images/Selection_064.png" /></p>

<p>For general case histogram of object and background are merged together, we had to define performance measure of selected threshold.</p>

<h2 id="otsu-thresholding">Otsu Thresholding</h2>

<h3 id="basic-idea">Basic Idea</h3>

<p>Otsu thresholding aims to automatically find optimal threshold for image binarization. It assumes two classes object and background. The idea is to select the threshold that will minimize within class variance or maximize between class variance. That’s means that we need to calculate these values for all gray levels and select one that has minimum within class variance and maximum between class variance.</p>

<p>But what that mean ? It means that optimal threshold is that one who divide histogram into two parts given that distribution of values at same partition has minimum variance (Values are close to each other) or distributions of different partitions are isolated (far from each other).</p>

<p><img src="../images/Otsu's_Method_Visualization.gif" alt="" />
<a href="https://en.wikipedia.org/wiki/Otsu%27s_method">source</a></p>

<p>Maximizing between class variance</p>

<h3 id="within-class-variance">Within class variance</h3>

<p>Within class variance <script type="math/tex">\sigma_w^2</script> can be calculated at specific threshold value <script type="math/tex">t</script> as follow</p>

<script type="math/tex; mode=display">\sigma_w^2  = c_1 \sigma_1^2 + (1-c_1) \sigma_2^2</script>

<p>Where <script type="math/tex">c_1</script> is the cumulative sum at that threshold <script type="math/tex">t</script>, <script type="math/tex">\sigma_1^2</script> is the variance of first class and <script type="math/tex">\sigma_2^2</script> is the variance of second class. We can conclude that <script type="math/tex">\sigma_w^2</script> is a weighted sum of variances of both classes.</p>

<h3 id="between-class-variance">Between class variance</h3>

<p>For between class variance <script type="math/tex">\sigma_b^2</script> it is calculated for specific value of threshold <script type="math/tex">t</script> as follow</p>

<script type="math/tex; mode=display">\sigma_b^2  = c_1 (1-c_1) (\mu_1 - \mu_2)^2</script>

<p>where <script type="math/tex">\mu_1</script> and <script type="math/tex">\mu_2</script> is the mean of class 1 and 2 respectively.</p>
<h3 id="mean-and-variance-calculation">Mean and variance calculation</h3>

<p>Recall that mean or expected of variable <script type="math/tex">x</script> with probability density function <script type="math/tex">p(x)</script> is defined as</p>

<script type="math/tex; mode=display">E[x] = \sum x p(x)</script>

<p>and variance</p>

<script type="math/tex; mode=display">\sigma^2 = E[x^2] - \mu^2</script>

<h4 id="how-to-get-pdf-of-both-classes-">How to get pdf of both classes ?</h4>

<p>Given the relative histogram that represent the pdf of all the image. We can determine the pdf of class 1 with gray levels &lt; threshold t by dividing the relative histogram by the total probabilities till that threshold t which is cumulative probability at that threshold CDF(t). For second class we can get its pdf by dividing by (1 - CDF(t)).</p>
<h3 id="basic-algorithm">Basic Algorithm</h3>
<p>Basic algorithm for determining threshold that maximize between class variance is</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Get</span> <span class="n">Histogram</span> <span class="n">of</span> <span class="n">the</span> <span class="n">image</span>
<span class="n">Get</span> <span class="n">relative</span> <span class="n">histogram</span> <span class="p">(</span><span class="n">PDF</span><span class="p">)</span>
<span class="n">Get</span> <span class="n">cumulative</span> <span class="n">Histogram</span> <span class="p">(</span><span class="n">CDF</span><span class="p">)</span>
<span class="n">initialize</span> <span class="n">OptThreshold</span> <span class="o">=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">maxVariance</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">For</span> <span class="n">each</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">255</span> 
  <span class="n">m1</span> <span class="o">=</span>  <span class="n">mean</span> <span class="n">value</span> <span class="k">class</span> <span class="err">1 
  </span><span class="nc">m2</span> <span class="o">=</span>  <span class="n">mean</span> <span class="n">value</span> <span class="k">class</span> <span class="err">2  
  </span><span class="nc">c1</span> <span class="o">=</span> <span class="n">CDF</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
  <span class="n">varBet</span> <span class="o">=</span> <span class="n">c1</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">c1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">m1</span> <span class="o">-</span> <span class="n">m2</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>   
  <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="n">maxVariance</span> 
      <span class="n">maxVariance</span> <span class="o">=</span> <span class="n">value</span>
      <span class="n">OptThreshold</span> <span class="o">=</span> <span class="n">t</span>  
</code></pre></div></div>

<p><strong>Lets try to implement it</strong></p>

<p>Import some libraries</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">colors</span>
</code></pre></div></div>

<p>Defining otsu function that returns the optimal threshold of input image.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">otsuThresholdB</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
    <span class="c">#Get size of image</span>
    <span class="n">rows</span><span class="p">,</span> <span class="n">cols</span> <span class="o">=</span>  <span class="n">image</span><span class="o">.</span><span class="n">shape</span>
    <span class="c">#Plotting image histogram</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="c">#We are interested on H (histogram), other values that plt.hist returns will be ignored here</span>
    <span class="n">H</span><span class="p">,</span> <span class="n">binEdges</span><span class="p">,</span> <span class="n">patches</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span><span class="mi">256</span><span class="p">)</span>
    <span class="c"># Getting relative histogram (pdf)</span>
    <span class="n">pdf</span> <span class="o">=</span> <span class="n">H</span> <span class="o">/</span><span class="p">(</span><span class="n">rows</span><span class="o">*</span><span class="n">cols</span><span class="p">)</span>
    <span class="c"># Get cdf for all gray levels</span>
    <span class="n">cdf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">pdf</span><span class="p">)</span>
    <span class="c">#Initialization</span>
    <span class="n">othresh</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">maxVarB</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></div>
<p>Calculation of between class variance of all gray levels and extract threshold with max variance</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">255</span><span class="p">):</span>
        <span class="c">#gray levels belongs to background </span>
        <span class="n">bg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">t</span><span class="p">)</span>
        <span class="c">#object gray levels</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="mi">256</span><span class="p">)</span>
        <span class="c">#Calculation of mean gray level for object and background</span>
        <span class="n">mBg</span>    <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">bg</span><span class="o">*</span><span class="n">pdf</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">t</span><span class="p">])</span><span class="o">/</span><span class="n">cdf</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
        <span class="n">mObj</span>   <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">obj</span><span class="o">*</span><span class="n">pdf</span><span class="p">[</span><span class="n">t</span><span class="p">:</span><span class="mi">256</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">cdf</span><span class="p">[</span><span class="n">t</span><span class="p">])</span>
        <span class="c"># Calculate between class variance</span>
        <span class="n">varB</span> <span class="o">=</span> <span class="n">cdf</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">cdf</span><span class="p">[</span><span class="n">t</span><span class="p">])</span> <span class="o">*</span><span class="p">(</span><span class="n">mObj</span> <span class="o">-</span> <span class="n">mBg</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
        <span class="c">#Pick up max variance and corresponding threshold</span>
        <span class="k">if</span> <span class="n">varB</span> <span class="o">&gt;</span> <span class="n">maxVarB</span><span class="p">:</span>
            <span class="n">maxVarB</span><span class="o">=</span> <span class="n">varB</span>
            <span class="n">othresh</span> <span class="o">=</span> <span class="n">t</span>
    <span class="k">return</span> <span class="n">othresh</span>
</code></pre></div></div>
<p>We didn’t finished yet. we will use that threshold to binarize the image so lets define that function</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">binarize</span><span class="p">(</span> <span class="n">gray_image</span> <span class="p">,</span> <span class="n">threshold</span> <span class="p">):</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="o">*</span> <span class="p">(</span> <span class="n">gray_image</span> <span class="o">&gt;</span> <span class="n">threshold</span> <span class="p">)</span>
</code></pre></div></div>
<p>Here is the main function</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Read an image</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s">'images/MRIbrain3.jpg'</span><span class="p">)</span>
<span class="c">#Extract value channel (intensity)</span>
<span class="n">hsvImage</span> <span class="o">=</span> <span class="n">colors</span><span class="o">.</span><span class="n">rgb_to_hsv</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
<span class="n">myIm</span> <span class="o">=</span> <span class="n">hsvImage</span><span class="p">[</span><span class="o">...</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="c">#Show original image</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">myIm</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">set_cmap</span><span class="p">(</span><span class="s">"gray"</span><span class="p">)</span>
<span class="c">#Get optimal threshold</span>
<span class="n">oTb</span> <span class="o">=</span> <span class="n">otsuThresholdB</span><span class="p">(</span><span class="n">myIm</span><span class="p">)</span>
<span class="c">#Binarize the image and show it</span>
<span class="n">binaryIm</span> <span class="o">=</span> <span class="n">binarize</span><span class="p">(</span><span class="n">myIm</span><span class="p">,</span> <span class="n">oTw</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">binaryIm</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>
<p><strong>Results</strong></p>

<p>Original Image</p>

<p><img src="../images/MRIbrain3.png" alt="" /></p>

<p>Histogram of the image</p>

<p><img src="../images/hist.png" alt="" /></p>

<p>The binary image optimal threshold value was 66</p>

<p><img src="../images/MRIThr.png" alt="" /></p>

<p>What about minimizing within class variance ?</p>

<h2 id="seed-pixels-region-growing">Seed Pixels (Region Growing)</h2>
<p>Segmentation starts with initial seed point. Neighbors of that pixel will be merged if they similar to it. Similarity criteria may be defined as intensity or color. Process continues till no more similar neighbors found. For example next figure shows segmented regions for different seed points.</p>

<p><img style="width:95%" src="../images/Selection_066.png" /></p>


  </div>

</article>

<!-- 
Thanks to Roman Cheplyaka for his instructions to minifying the mathjax package:
https://ro-che.info/articles/2017-04-02-deploying-mathjax 
-->

<script src="/mathjax/MathJax.js"></script>

<script type="text/javascript">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    tex2jax: { inlineMath: [['$', '$'], ['\\(', '\\)']], skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'] },
    jax: ["input/TeX", "output/HTML-CSS"],
    "HTML-CSS": {
      availableFonts: ["TeX"],
      imageFont: null
    },
    MathMenu: {
      showRenderer: false,
      showFontMenu: false,
      showLocale: false
    }
  });
</script>
      </div>
    </main>

    <footer class="site-footer">
  <div class="wrapper">

    <!-- <h2 class="footer-heading">Tutorials for SBME Students</h2> -->

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              Asem Alaa
            
            </li>
            
            <li><a href="mailto:asem.a.abdelaziz@gmail.com">asem.a.abdelaziz@gmail.com</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/A-Alaa"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">A-Alaa</span></a>

          </li>
          

          
            <li>
              <a href="https://linkedin.com/in/asem-alaa">
                <i class="fa fa-linkedin"></i> LinkedIn
              </a>
            </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>These pages shall contain all the materials corresponding to  courses, assigned to me, in the SBME department at Cairo University.</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
